---
title: 'Ubuntu24.04 Docker安装|调试|编写镜像|运行第一个容器'
author: 'J.sky'
time: '2026-02-23T14:07:18.716Z'
tag: 'Docker'
ai_label: 2
description: '之前在用MacBookPro的时候鼓捣过一阵子Docker,这一晃又是好多年过去了，晚上跟着教程操作了一下最新的Docker相关操作，但是系统不同安装和运行还是有些差别的，一边操作一边记录。'
---

之前在用MacBookPro的时候鼓捣过一阵子Docker,这一晃又是好多年过去了，晚上跟着教程操作了一下最新的Docker相关操作，但是系统不同安装和运行还是有些差别的，一边操作一边记录，老方法来学习。虽然有了AI辅助，但是有些东西该学还是得学，凡事讲究个本源。


## 准备

* 系统：`Ubuntu 24.04.4 LTS`
* Docker: `29.2.1`（当前b最新版本）


## 方法一：官方推荐方式（使用 apt 仓库）

这是 Docker 官方推荐的安装方式，适用于 Ubuntu 22.04/24.04 等 LTS 版本 。

### 1. 卸载旧版本（如有）

```bash
sudo apt-get remove docker docker-engine docker.io containerd runc docker-compose docker-compose-v2 docker-doc podman-docker
```

### 2. 更新系统并安装依赖

```bash
sudo apt-get update
sudo apt-get install -y ca-certificates curl gnupg
```

### 3. 添加 Docker 官方 GPG 密钥

```bash
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc
```

### 4. 添加 Docker APT 仓库

```bash
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
```

### 5. 安装 Docker Engine

安装最新版本（包含 Docker Compose 插件）：

```bash
sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

如需安装特定版本，先查看可用版本：
```bash
apt-cache madison docker-ce
```

然后安装指定版本（示例）：
```bash
VERSION_STRING="5:28.3.2-1~ubuntu.24.04~noble"
sudo apt-get install -y docker-ce=$VERSION_STRING docker-ce-cli=$VERSION_STRING containerd.io docker-buildx-plugin docker-compose-plugin
```

### 6. 启动并验证

```bash
# 启动 Docker 服务（通常安装后自动启动）
sudo systemctl start docker
sudo systemctl enable docker
```

```bash
# 验证安装
sudo docker run hello-world
```

这里的验证如果失败，极有可能是网络部通畅无法访问Github造成的，可以先**配置国内镜像加速之后再测试。**



## 配置非 root 用户使用 Docker

默认情况下需要 `sudo` 运行 Docker 命令，可通过以下步骤授权普通用户 ：

```bash
# 创建 docker 用户组（通常已存在）
sudo groupadd docker

# 将当前用户加入 docker 组
sudo usermod -aG docker $USER

# 重新登录或执行以下命令使权限生效
newgrp docker

# 验证（无需 sudo）
docker run hello-world
```




## 配置国内镜像加速（推荐）

编辑或创建 Docker 配置文件：

```bash
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://docker.1panel.live",
    "https://hub.rat.dev",
    "https://docker.mirrors.ustc.edu.cn",
    "https://dockerpull.com",
    "https://dockerhub.icu",
    "https://docker.awsl9527.cn"
  ]
}
EOF

sudo systemctl daemon-reload
sudo systemctl restart docker
```

## 常用管理命令

| 命令 | 说明 |
|------|------|
| `docker --version` | 查看版本 |
| `sudo systemctl status docker` | 查看服务状态 |
| `sudo systemctl start/stop/restart docker` | 启动/停止/重启 |
| `sudo systemctl enable/disable docker` | 开机自启/禁用 |
| `docker compose version` | 查看 Compose 版本 |
| `docker info` | 查看系统信息 |

## 卸载 Docker

如需完全卸载 ：

```bash
sudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
```

---

**注意事项**：
- 支持的 Ubuntu 版本：22.04 LTS (Jammy)、24.04 LTS (Noble)、25.10 (Questing) 
- 支持的架构：x86_64/amd64、arm64、armhf、s390x、ppc64le
- 安装前确保系统已更新，且没有冲突的防火墙规则（如使用 `ufw` 需注意端口映射会绕过防火墙）



## 构建镜像和运行容器

### 1.1.1 准备代码

创建一个名为 `hello-docker` 的文件夹，并在其中创建一个 `index.html` 文件：

```html
<h1>Hello, Docker!</h1>
```

### 1.1.2 编写 Dockerfile

在同级目录下创建一个名为 `Dockerfile` (无后缀) 的文件：

```dockerfile
FROM nginx:alpine
COPY index.html /usr/share/nginx/html/index.html
```

### 1.1.3 构建镜像

打开终端，进入该目录，执行构建命令：

```bash
$ docker build -t my-hello-world .
```

如果构建失败，很大的可能是网络问题，请**配置镜像加速**。

* `docker build`：构建命令
* `-t my-hello-world`：给镜像起个名字 (标签)
* `.`：指定上下文路径为当前目录



### 1.1.4 运行容器

使用刚才构建的镜像启动一个容器：

```bash
$ docker run -d -p 8080:80 my-hello-world
```

* `docker run`：运行命令
* `-d`：后台运行
* `-p 8080:80`：将宿主机的 8080 端口映射到容器的 80 端口

### 1.1.5 访问测试

打开浏览器访问 [http://localhost:8080](http://localhost:8080)，你应该能看到 “Hello，Docker！”。

### 1.1.6 清理

停止并删除容器：

```bash
## 查看正在运行的容器 ID

$ docker ps

## 停止容器

$ docker stop <CONTAINER_ID>

## 删除容器

$ docker rm <CONTAINER_ID>
```


## 参考

* [ubuntu 安装 docker](https://yeasy.gitbook.io/docker_practice/di-yi-bu-fen-ru-men-pian/03_install/3.1_ubuntu)

* [快速上手](https://yeasy.gitbook.io/docker_practice/di-yi-bu-fen-ru-men-pian/01_introduction/1.1_quickstart)

* [Docker 从入门到实践](https://yeasy.gitbook.io/docker_practice)

* [Docker 中文教程](https://docker-practice.github.io/zh-cn/)